<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="${ctx_path}/css/styles.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="${ctx_path}/js/jquery.js"></script>
           <!--[if lte IE 6]>
<script type="text/javascript" src="${ctx_path}/js/DD_belatedPNG_0.0.8a.js"></script>
    <script type="text/javascript">
        DD_belatedPNG.fix('div, ul, img, li , a, a:hover,h3,.caption, p');
    </script>
<![endif]--> 
<title>企业信息</title>
<script type="text/javascript">
$(function () {
    $("#okbtn").click(function () {
    	var ts="1";  //表示验证通过
    	//提交前验证
    	//电子邮箱格式验证规则 
	    var filter  = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
	    //数字和字母组合验证
    	var  es=/^(\d+[a-zA-Z]\w*)|([a-zA-Z]+\d\w*)$/;
    	
    	var EMail=$("#Email").val();
    	var Password1=$("#Password1").val();
    	var Password2=$("#Password2").val();
    	var LinkmanName=$("#LinkmanName").val();
    	var LinkmanPhone=$("#LinkmanPhone").val();
    	var CompanyName=$("#CompanyName").val();
    	
    		
    	
    	
    	if(EMail!="")
	    {
    		if(filter.test(EMail))
    	   	{
    			$("#EmailTS").text(""); //清空提示
    	   	}else
    	   	{	 
    	   		ts="2";
    	   	    $("#Email").val("");   //清空文本内容
    	   	    $("#EmailTS").text("邮箱格式不正确，请重新输入");
    	   	}
	    }else
	    {
	    	 ts="2";
	    	 $("#EmailTS").text("邮箱不能为空，请输入");
	    }
    	
    	
    	if(Password1!="" && Password2!=""){
    		if(Password1!=Password2){
    			ts="2";
    	   	    $("#Password2").val("");   //清空文本内容
    	   	    $("#Password1TS").text("");
    	   	    $("#Password2TS").text("确认密码与密码不一致，请重新输入");
    		}else
    		{
    			$("#Password2TS").text("");
    		}
    	}else{
    		
    		if(Password1==""){
    			ts="2";
    	    	$("#Password1TS").text("密码不能为空，请输入");
    		}
    		if(Password2==""){
    			ts="2";
    			$("#Password2TS").text("确认密码不能为空，请输入");
    		}
    	}
    	
    	if(LinkmanName=="")
    	{
    		ts="2";
	    	$("#LinkmanNameTS").text("联系人不能为空，请输入");
    	}else
    	{
    		$("#LinkmanNameTS").text("");
    	}	
    	
    	if(LinkmanPhone=="")
    	{
    		ts="2";
	    	$("#LinkmanPhoneTS").text("联系电话不能为空，请输入");
    	}else
    	{
    		$("#LinkmanPhoneTS").text("");
    	}
    	
    	if(CompanyName=="")
    	{
    		ts="2";
	    	$("#CompanyNameTS").text("单位名称不能为空，请输入");
    	}else
    	{
    		$("#CompanyNameTS").text("");
    	}
    	 
	    
	    //2表示验证未通过
	    if(ts=="2"){
	    	 return false;
	    }else
	    {  	    	
	    	$.ajax({
	            url: '${ctx_path}/company/save',
	            type: 'post',
	            dataType: 'json',
	            data: $("#formdata").serialize(),
	            success: function (data) {
	                if (data.success == true || data.success == "true"){
	                	alert("修改成功");
	                	location.href="${ctx_path}/company/detail";
		                //$("#responseText").text(data);
	                }else{
	                	alert("修改失败");
	                }
	            }
	      });
	      return false;
	    }
	    
	    
    });
});
</script>
</head>

<body>

<#include "/common/_header.html"/>
<@header username=company.Username detailUrl="${ctx_path}/company/detail"/>

<div class="container_12">
				<form id="formdata" action="" method="post">
						<input type="hidden" name="company.id" value="${company.id!}"/>

						<table width="100%" border="0" cellpadding="0" cellspacing="0">
						   <tr>
								<td class="td02"><label>企业账号:</label></td>
								<td>${company.Username!}
								</td>
							</tr>

							<tr>
								<td class="td02"><label>登录密码:</label><span style='color:red'>*</span></td>
								<td><input type="password" style="width:80;border-style:none" name="company.Password" id="Password1" class="text smaller" value="${company.Password!}" />
								<span id='Password1TS' style='color:red'></span>
								</td>
							</tr>
							<tr>
								<td class="td02"><label>确认密码:</label><span style='color:red'>*</span></td>
								<td><input type="password" style="width:80;border-style:none" name="company.Password" id="Password2" class="text smaller" value="${company.Password!}" />
								<span id='Password2TS' style='color:red'></span>
								</td>
							</tr>
							
							<tr>
								<td class="td02"><label>联系人姓名:</label><span style='color:red'>*</span></td>
								<td><input type="text" style="width:80;border-style:none" name="company.LinkmanName" id="LinkmanName" class="text smaller" value="${company.LinkmanName!}" />
								<span id='LinkmanNameTS' style='color:red'></span>
								</td>
							</tr>

							<tr>
								<td class="td02"><label>联系人电话:</label><span style='color:red'>*</span></td>
								<td><input type="text" style="width:80;border-style:none" name="company.LinkmanPhone" id="LinkmanPhone" class="text smaller" value="${company.LinkmanPhone!}" onkeyup="value=value.replace(/[^\d\.]/g,''); "/>
								<span id='LinkmanPhoneTS' style='color:red'></span>
								</td>
							</tr>
							<tr>
								<td class="td02"><label>电子邮箱:</label><span style='color:red'>*</span></td>
								<td><input type="text" style="width:80;border-style:none" name="company.Email" id="Email" class="text smaller" value="${company.Email!}" />
								    <span id='EmailTS' style='color:red'></span>
								</td>
							</tr>
							
							<tr>
								<td class="td02"><label>单位名称:</label><span style='color:red'>*</span></td>
								<td><input type="text" style="width:80;border-style:none" name="company.CompanyName" id="CompanyName" class="text smaller" value="${company.CompanyName!}" />
								<span id='CompanyNameTS' style='color:red'></span>
								</td>
							</tr>
							<tr>
								<td class="td02"><label>单位地址:</label></td>
								<td><input type="text" style="width:80;border-style:none" name="company.CompanyAddress" id="CompanyAddress" class="text smaller" value="${company.CompanyAddress!}" /></td>
							</tr>
							<tr>
								<td class="td02"><label>邮政编码:</label></td>
								<td><input type="text" style="width:80;border-style:none" name="company.ZipCode" class="text smaller" value="${company.ZipCode!}" onkeyup="value=value.replace(/[^\d\.]/g,''); "/></td>
							</tr>

							<tr>
								<td class="td02"><label>单位电话:</label></td>
								<td><input type="text" style="width:80;border-style:none" name="company.CompanyPhone" class="text smaller" value="${company.CompanyPhone!}" /></td>
							</tr>

							<tr>
								<td class="td02"><label>单位传真:</label></td>
								<td><input type="text" style="width:80;border-style:none" name="company.CompanyFax" class="text smaller" value="${company.CompanyFax!}" /></td>
							</tr>
    </table> 
 <div class="anniu"><a href="" class="login" title="修改" id="okbtn" >修改</a>
 <a href="javascript:history.go(-1)" class="register" title="返回" >返回</a>
 </div>
</form>
</div>
</body>
</html>
